<!DOCTYPE html>
<html lang="ko">
<head>
    <title>끝말잇기 - 게임 룸 목록</title>
    <style>
        body { font-family: sans-serif; display: flex; justify-content: center; padding-top: 50px; background-color: #f0f2f5; }
        .container { width: 90%; max-width: 600px; }
        .room-list { list-style: none; padding: 0; }
        .room-item { background: white; margin-bottom: 10px; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); display: flex; justify-content: space-between; align-items: center; }
        .room-item a { text-decoration: none; color: #007bff; font-weight: bold; }
        .room-item span { color: #666; }
        button { padding: 10px 15px; font-size: 1rem; cursor: pointer; border-radius: 4px; border: none; background-color: #28a745; color: white; }
    </style>
</head>
<body>
<div class="container">
    <h1>게임 룸 목록</h1>
    <button id="create-room-btn">새로운 방 만들기</button>
    <ul id="room-list" class="room-list"></ul>
</div>
<script>
    const roomListEl = document.getElementById('room-list');
    const createRoomBtn = document.getElementById('create-room-btn');

    async function fetchRooms() {
        const response = await fetch('/api/rooms');
        const rooms = await response.json();
        roomListEl.innerHTML = ''; // 목록 비우기
        if (rooms) {
            rooms.forEach(room => {
                const li = document.createElement('li');
                li.className = 'room-item';
                li.innerHTML = `
                    <a href="/room.html?id=${room.id}">방 #${room.id} - ${room.name}</a>
                    <span>${room.is_started ? '게임 중' : '대기 중'} (${room.player_count}명)</span>
                `;
                roomListEl.appendChild(li);
            });
        }
    }

    createRoomBtn.addEventListener('click', async () => {
        const response = await fetch('/api/rooms', { method: 'POST' });
        const newRoom = await response.json();
        window.location.href = `/room.html?id=${newRoom.id}`;
    });

    // 1초마다 룸 목록을 새로고침
    fetchRooms();
    setInterval(fetchRooms, 1000);
</script>
</body>
</html>